<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1.0">
		<title>动画</title>
		<style type="text/css">
			.animate-enter, .animate-leave{
				width:100px;
				height:100px;
				background: #29b6f6;
				transition: width 2s;
				-moz-transition: width 2s; /* Firefox 4 */
				-webkit-transition: width 2s; /* Safari 和 Chrome */
				-o-transition: width 2s; /* Opera */
			}
			.animate-enter-active, .animate-leave{
				width:300px;
			}
			.animate-leave-active{
				width:100px;
			}
		</style>
		<script type="text/javascript" src="../../node_modules/avalon2/dist/avalon.js"></script>
	</head>
	<body>
		<div ms-controller='effect' >
			<div ms-effect="{is:'animate', action:@action,onEnterDone: @enterCb,onLeaveDone: @leaveCb}">
				{{@aaa}}
			</div>
			<button ms-click='@action = @action !== "leave" ? "leave": "enter"'
			type="button">click</button>
		</div>
		<script type="text/javascript">
			var vm = avalon.define({
			    $id: 'effect',
			    aaa: "test",
			    action: 'enter',
			    enterCb: function(){
			        avalon.log('动画完成')
			    },
			    leaveCb: function(){
			        avalon.log('动画回到原点')
			    }
			});
			avalon.effect('animate');
		</script>
	</body>
</html>